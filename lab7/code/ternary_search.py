# ternary_search.py
# Тернарный поиск (Ternary Search) для поиска в отсортированном массиве
#
# Замечание:
# - Тернарный поиск делит диапазон на три части и сравнивает искомый элемент с двумя серединами.
# - Для простого поиска элемента в массиве тернарный поиск не даёт преимущества перед бинарным:
#   сложность оба O(log n), но тернарный делает больше сравнений на шаг.
#
# Есть другая ветка применения тернарного поиска: поиск максимума/минимума унимодальной функции.
#
# Временная сложность: O(log n) (с базой 3), но количество сравнений на итерацию выше.
#
# В этой реализации — итеративный тернарный поиск для массива.

from typing import List

def ternary_search(arr: List[int], target: int) -> int:
    """
    Возвращает индекс target или -1.
    Итеративная реализация: делим диапазон на три части и сравниваем элементами mid1, mid2.
    """
    left, right = 0, len(arr) - 1
    while left <= right:
        # Находим две трети точки
        third = (right - left) // 3
        mid1 = left + third
        mid2 = right - third

        # Сравниваем с mid1 и mid2
        if arr[mid1] == target:
            return mid1
        if arr[mid2] == target:
            return mid2

        # Сужаем диапазон
        if target < arr[mid1]:
            # Искомый слева от mid1
            right = mid1 - 1
        elif target > arr[mid2]:
            # Искомый справа от mid2
            left = mid2 + 1
        else:
            # Искомый между mid1 и mid2
            left = mid1 + 1
            right = mid2 - 1
    return -1

if __name__ == "__main__":
    arr = [2, 5, 8, 12, 16, 23, 38, 56, 72, 91]
    print("Массив:", arr)
    for t in [23, 2, 91, 13]:
        idx = ternary_search(arr, t)
        print(f"Поиск {t}: индекс {idx}")
